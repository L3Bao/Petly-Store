<% if (user && user.role === 'customer') { %>
    <header class="header" data-header>
      <div class="container">

        <button class="nav-toggle-btn" aria-label="toggle manu" data-nav-toggler>
          <ion-icon name="menu-outline" aria-hidden="true" class="menu-icon"></ion-icon>
          <ion-icon name="close-outline" aria-label="true" class="close-icon"></ion-icon>
        </button>

        <a href="vendor-dashboard" class="logo">Petly</a>

        <nav class="navbar" data-navbar>
          <ul class="navbar-list">

            <li class="navbar-item">
              <a href="/customer-dashboard" class="navbar-link" data-nav-link>Home</a>
            </li>

            <li class="navbar-item">
              <a href="#shop" class="navbar-link" data-nav-link>Shop</a>

              <ul class="dropdown-list">

                <li class="dropdown-item">
                  <a href="#">Cat Food</a>
                </li>

                <li class="dropdown-item">
                  <a href="#">Cat Toys</a>
                </li>

                <li class="dropdown-item">
                  <a href="#">Dog Food</a>
                </li>

                <li class="dropdown-item">
                  <a href="#">Dog Toys</a>
                </li>

                <li class="dropdown-item">
                <a href="#">Supplements</a>
              </li>

            </ul>
          </li>

          <li class="navbar-item">
            <a href="#" class="navbar-link" data-nav-link>Blogs</a>
          </li>

          <li class="navbar-item">
            <a href="#" class="navbar-link" data-nav-link>Contact</a>
          </li>

        </ul>

        <a href="/login" class="navbar-action-btn">Log In</a>
      </nav>

      <div class="header-actions">

        <div class="search-box" aria-label="Search">
          <form action="/search" method="GET">
            <button class="btn-search">
              <ion-icon name="search-outline"></ion-icon>
            </button>
            <input type="search" id="search-bar" class="input-search" placeholder="Type to Search..." onkeyup="sendData(this)">
            <section id="searchResults">
            </section>
          </form>
        </div>

        <button class="action-btn user" aria-label="User">
          <a href="/profile"><ion-icon name="person-outline" aria-hidden="true"></ion-icon></a>
        </button>

        <button class="action-btn" aria-label="cart">
          <a href="/cart">
            <ion-icon name="bag-handle-outline" aria-hidden="true"></ion-icon>
            <span class="btn-badge">0</span>
          </a>
        </button>

      </div>

    </div>
</header>
<% } %>
<% if (user && user.role === 'vendor') { %>
  <header class="header" data-header>
    <div class="container">

      <button class="nav-toggle-btn" aria-label="toggle manu" data-nav-toggler>
        <ion-icon name="menu-outline" aria-hidden="true" class="menu-icon"></ion-icon>
        <ion-icon name="close-outline" aria-label="true" class="close-icon"></ion-icon>
      </button>

      <a href="/vendor-dashboard" class="logo">Petly</a>

      <nav class="navbar" data-navbar>
        <ul class="navbar-list">

          <li class="navbar-item">
            <a href="/vendor-dashboard" class="navbar-link" data-nav-link>Home</a>
          </li>

          <li class="navbar-item">
            <a href="/manage-orders" class="navbar-link" data-nav-link>Manage Order</a>
          </li>

          <li class="navbar-item">
            <a href="/add-product" class="navbar-link" data-nav-link>Add Products</a>
          </li>

        </ul>

        <a href="/login" class="navbar-action-btn">Log In</a>
      </nav>

      <div class="header-actions">

        <div class="search-box" aria-label="Search">



          <button class="btn-search">
            <ion-icon name="search-outline"></ion-icon>
          </button>
          <input type="search" id="search-bar" class="input-search" placeholder="Type to Search..." >
       




        </div>


        <button class="action-btn user" aria-label="User">
          <a href="/profile"><ion-icon name="person-outline" aria-hidden="true"></ion-icon></a>
        </button>

        <button class="action-btn" aria-label="cart">
          <ion-icon name="bag-handle-outline" aria-hidden="true"></ion-icon>

          <span class="btn-badge">0</span>
        </button>

      </div>

    </div>
</header>
<% } %>
<% if (user && user.role === 'shipper') {%>
  <header class="header" data-header>
    <div class="container">

      <button class="nav-toggle-btn" aria-label="toggle manu" data-nav-toggler>
        <ion-icon name="menu-outline" aria-hidden="true" class="menu-icon"></ion-icon>
        <ion-icon name="close-outline" aria-label="true" class="close-icon"></ion-icon>
      </button>

      <a href="vendor-dashboard" class="logo">Petly</a>

      <nav class="navbar" data-navbar>
        <ul class="navbar-list">

          <li class="navbar-item">
            <a href="/customer-dashboard" class="navbar-link" data-nav-link>Home</a>
          </li>

          <li class="navbar-item">
            <a href="#shop" class="navbar-link" data-nav-link>Shop</a>

            <ul class="dropdown-list">

              <li class="dropdown-item">
                <a href="#">Cat Food</a>
              </li>

              <li class="dropdown-item">
                <a href="#">Cat Toys</a>
              </li>

              <li class="dropdown-item">
                <a href="#">Dog Food</a>
              </li>

              <li class="dropdown-item">
                <a href="#">Dog Toys</a>
              </li>

              <li class="dropdown-item">
              <a href="#">Supplements</a>
            </li>

          </ul>
        </li>

        <li class="navbar-item">
          <a href="#" class="navbar-link" data-nav-link>Blogs</a>
        </li>

        <li class="navbar-item">
          <a href="#" class="navbar-link" data-nav-link>Contact</a>
        </li>

      </ul>

      <a href="/login" class="navbar-action-btn">Log In</a>
    </nav>

    <div class="header-actions">

      <div class="search-box" aria-label="Search">
        <form action="/search" method="GET">
          <button class="btn-search">
            <ion-icon name="search-outline"></ion-icon>
          </button>
          <input type="search" id="search-bar" class="input-search" placeholder="Type to Search...">
        </form>
      </div>

      <button class="action-btn user" aria-label="User">
        <a href="/profile"><ion-icon name="person-outline" aria-hidden="true"></ion-icon></a>
      </button>

      <button class="action-btn" aria-label="cart">
        <ion-icon name="bag-handle-outline" aria-hidden="true"></ion-icon>

        <span class="btn-badge">0</span>
      </button>

    </div>

  </div>
</header>
<% } %>



<!-- search-result.ejs -->
<!-- Place this script at the bottom of the template -->
<script>
  function sendData(e) {
    const searchResults = document.getElementById('searchResults');
    let match = e.value.match(/^[a-zA-Z ]*/);
    let match2 =  e.value.match(/\s*/);
    if (match2[0] === e.value) {
      searchResults.innerHTML = '';
      return;
    }
    if (match[0] === e.value) {
      fetch('getProduct', {
        method: "POST",
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ payload: e.value })
      })
      .then(res => res.json()) // Invoke .json() to parse response data
      .then(data => {
        let payload = data.payload;
        searchResults.innerHTML = '';
        if (payload.length < 1) {
          searchResults.innerHTML = '<p>Sorry, nothing found.</p>';
          return;
        }
        payload.forEach((item, index) => {
          if (index > 0) searchResults.innerHTML += '<hr>';
          searchResults.innerHTML += `<p>${item.name}</p>`;
        });
      });
      return;
    }
    searchResults.innerHTML = '';
  }
</script>
