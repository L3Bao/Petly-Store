<%- include ('partials/head') %>
<%- include ('partials/nav') %>

<h1 id="header">Order</h1>
<div class="list-order">
  <div class="filter-search">
      <div class="search-bar">
          <input type="text" placeholder="search">
      </div>
      <div id="filter">
          <select name="" id="">
              <option value="">Order-ID</option>
              <option value="">Status</option>
          </select>
      </div>
  </div>
  <div class="order-list-container">
      <table class="tables">
          <tr class="trs">
              <th class="ths">Order-ID</th>
              <th class="ths">Name</th>
              <th class="ths">Product</th>
              <th class="ths">Total</th>
              <th class="ths">Action</th>
          </tr>
          <% orders.forEach(function(order){ %>
          <tr class="trs">
            <td class="tds"><%= order._id %></td>
            <td class="tds"><%= order.customerName %></td>
            <td class="tds">
              <ul>
                <% order.products.forEach(function(product){ %>
                  <li><%= product.name %> - <span class="price">$<%= product.price %></span></li>
                <% }); %>
              </ul>
            </td>
            <td>$<%= order.products.reduce((accumulator, product) => accumulator + product.price, 0).toFixed(2) %></td>
            <td class="tds" id="last-childe">
              <!-- Add the "Edit" and "Delete" buttons -->
              <a href="/edit-order/<%= order._id %>" class="edit-btn">Edit</a>
              <a href="/delete-order/<%= order._id %>" class="edit-btn" onclick="return confirm('Are you sure you want to delete this order?');">Delete</a>
            </td>
          </tr>
          <% }); %>
      </table>
  </div>
</div>

<%- include ('partials/footer') %>

