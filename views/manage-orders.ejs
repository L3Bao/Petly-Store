<%- include ('partials/head') %>
<%- include ('partials/nav') %>

<h1 id="header">Order</h1>
<div class="list-order">
  <div class="filter-search">
      <div class="search-bar">
          <input type="text" placeholder="search">
      </div>
      <div id="filter">
          <select name="" id="">
              <option value="">Order-ID</option>
              <option value="">Status</option>
          </select>
      </div>
  </div>
  <div class="order-list-container">
      <table class="table">
          <tr class="tr">
              <th class="th">Order-ID</th>
              <th class="th">Name</th>
              <th class="th">Product</th>
              <th class="th">Total</th>
              <th class="th">Action</th>
          </tr>
          <% orders.forEach(function(order){ %>
            <tr class tr>
              <td class="td"><%= order._id %></td>
              <td class="td"><%= order.customerName %></td>
              <td class="td">
                <ul>
                  <% order.products.forEach(function(product){ %>
                    <li><%= product.name %> - $<%= product.price %></li>
                  <% }); %>
                </ul>
              </td>
              <td>$<%= order.products.reduce((accumulator, product) => accumulator + product.price, 0).toFixed(2) %></td>
              <td class="td">
                <!-- Add the "Edit" and "Delete" buttons -->
                <a href="/edit-order/<%= order._id %>" class="btn btn-primary">Edit</a>
                <a href="/delete-order/<%= order._id %>" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this order?');">Delete</a>
              </td>
            </tr>
          <% }); %>
      </table>
  </div>
</div>

<%- include ('partials/footer') %>

