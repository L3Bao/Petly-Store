<!-- Semester: 2023A
Assessment: Assignment 2
Author: 
    To Bao Minh Hoang: s3978554
    Le Viet Bao: s3979654
    Huynh Ngoc Giang My: s3978986
    Luu van Thien Toan: s3979512
    Pho An Ninh: s3978162
Acknowledgement: https://youtube.com/watch?v=991fdnSllcw&feature=share - live search bar, chatgpt, Mr Tom Huynh's RMIT Store -->

<%- include ('partials/head') %>
<%- include ('partials/nav') %>
<main class="product-page-main">
<body>
  <h1>Cat Page Products</h1>
  <form action="/products" method="GET">
    <input type="number" name="minPrice" placeholder="Minimum Price">
    <input type="number" name="maxPrice" placeholder="Maximum Price">
    <input type="submit" value="Filter">
</form>
  
  <% if (products.length === 0) { %>
    <p>No products found in the Cat Page category.</p>
  <% } else { %>
  <section class="show-products">
      <% products.forEach((product) => { %>
        <div class="box-container">
          <div class="box">
            <span class="name"><a href="/product-detail/<%= product._id %>"><%= product.name %></a></span>
            <span class="price">Price: <%= product.price %></span>
            <img src="/images/<%= product.image.replace(/\\/g, '/').replace('public/', '')%>" alt="<%= product.image.replace(/\\/g, '/') %>">
            <form method="post" action="/cart">
              <input type="hidden" name="productId" value="<%= product._id %>" />
              <input type="hidden" name="quantity" value="1" />
              <div class="flex-btn">
                <button type="submit" class="cart-btn">ðŸ›’ Add to Cart</button>
              </div>
            </form>
          </div>
        </div>
      <% }); %>
  </section>  
  <% } %>

  <!-- Add any additional HTML, CSS, or JavaScript as needed -->
</body>
</main>

<%- include ('partials/footer') %>