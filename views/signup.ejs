<%- include ('partials/head') %>
<%- include ('partials/nav') %>

<main>
  <div class="container">
    <h1>Sign Up</h1>
<div class="background-imagery">
  <div class="add-product">
    <div class="heading">Sign Up</div>
    <% if (typeof errorMessage !== 'undefined') { %>
    <div class="alert alert-danger" role="alert">
      <%= errorMessage %>
    </div>
    <% } %>
    <form action="/signup" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <input type="text" class="form-control" id="username" name="username" required>
    <form action="/signup" method="POST">
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" class="form-control" id="password" name="password" required>
      </div>
      <div class="mb-3">
        <label for="role" class="form-label">Role</label>
        <select class="form-select" id="role" name="role" required>
          <option value="" disabled selected>Choose your role</option>
          <option value="customer">Customer</option>
          <option value="vendor">Vendor</option>
          <option value="shipper">Shipper</option>
        </select>
      </div>
      <!-- Additional fields for vendor -->
      <div class="vendor-info role-info" id="business-info" style="display: none;">
        <label for="businessName" class="form-label">Business Name</label>
        <input type="text" class="form-control" id="businessName" name="businessName">
      </div>
      <div class="vendor-info role-info" id="business-address" style="display: none;">
        <label for="businessAddress" class="form-label">Business Address</label>
        <input type="text" class="form-control" id="businessAddress" name="businessAddress">
      </div>
      <!-- Additional field for customer -->
      <div class="customer-info role-info" id="name-field" style="display: none;">
        <label for="name" class="form-label">Name</label>
        <input type="text" class="form-control" id="name" name="name">
      </div>
      <div class="customer-info role-info" id="customer-address" style="display: none;">
        <label for="customerAddress" class="form-label">Address</label>
        <input type="text" class="form-control" id="customerAddress" name="customerAddress">
      </div>
      <!-- Additional field for shipper -->
      <div class="shipper-info role-info" id="distribution-hub" style="display: none;">
        <label for="distributionHub" class="form-label">Distribution Hub</label>
        <select class="form-select" id="distributionHub" name="distributionHub">
          <option value="hanoi">Hanoi</option>
          <option value="hcm">Ho Chi Minh City</option>
          <option value="danang">Da Nang</option>
        </select>
      </div>
      <!-- Image upload field -->
      <div class="mb-3">
        <label for="profilePicture" class="form-label">Profile Picture</label>
        <input type="file" class="form-control" id="profilePicture" name="profilePicture">
      </div>
      <button type="submit" class="btn btn-primary">Sign Up</button>
    </form>
  </div>
</main>

<script>
  // Get the role select element and vendor info input fields
  const roleSelect = document.querySelector('#role');
  const roleInfos = {
    'vendor': document.querySelectorAll('.vendor-info'),
    'customer': document.querySelectorAll('.customer-info'),
    'shipper': document.querySelectorAll('.shipper-info'),
  };
  // Listen for changes on the role select element
  roleSelect.addEventListener('change', function() {
    // hide all role-specific fields
    document.querySelectorAll('.role-info').forEach(info => info.style.display = 'none');
    // show the selected role's fields
    if (this.value in roleInfos) {
      roleInfos[this.value].forEach(info => info.style.display = 'block');
    }
  });
</script>
</div>

<%- include ('partials/footer') %>